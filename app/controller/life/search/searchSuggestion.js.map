{
    "version": 3,
    "sources": [
        "../../../../src/controller/life/search/searchSuggestion.js"
    ],
    "names": [
        "BaseRest",
        "require",
        "indexAction",
        "isGet",
        "HttpRequest",
        "think",
        "service",
        "param",
        "get",
        "wd",
        "encodeURI",
        "result",
        "GetService",
        "jsonStr",
        "getBetweenTwoStringContent",
        "body",
        "resultArr",
        "JSON",
        "parse",
        "replace",
        "i",
        "length",
        "value",
        "success",
        "err",
        "console",
        "log",
        "fail"
    ],
    "mappings": ";;AAAA;;;;;;;;AACA,MAAMA,WAAWC,QAAQ,YAAR,CAAjB;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBAwCe,cAAcD,QAAd,CAAuB;AAC5BE,eAAN,GAAoB;AAAA;;AAAA;AAChB,gBAAI,MAAKC,KAAT,EAAgB;AACZ,sBAAMC,cAAcC,MAAMC,OAAN,CAAc,aAAd,CAApB;AACA,sBAAMC,QAAQ,MAAKC,GAAL,EAAd;AACA,oBAAI,CAACD,MAAME,EAAX,EAAe;AACXF,0BAAME,EAAN,GAAW,EAAX;AACH,iBAFD,MAEO;AACHF,0BAAME,EAAN,GAAWC,UAAUH,MAAME,EAAhB,CAAX;AACH;AACD,oBAAIE,SAAS,MAAMP,YAAYQ,UAAZ,CAAuB,gDAAgDL,MAAME,EAA7E,CAAnB;AACA,oBAAII,UAAU,gBAAMC,0BAAN,CAAiCH,OAAOI,IAAxC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,IAAxD,CAAd;AACA,oBAAI;AACA,wBAAIC,YAAYC,KAAKC,KAAL,CAAWL,QAAQM,OAAR,CAAgB,KAAhB,EAAuB,EAAvB,CAAX,CAAhB;AACA,yBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIJ,UAAUK,MAA9B,EAAsCD,GAAtC,EAA2C;AACvCJ,kCAAUI,CAAV,IAAe;AACXE,mCAAON,UAAUI,CAAV;AADI,yBAAf;AAGH;AACD,0BAAKG,OAAL,CAAaP,SAAb,EAAwB,YAAxB;AACH,iBARD,CAQE,OAAOQ,GAAP,EAAY;AACVC,4BAAQC,GAAR,CAAYF,GAAZ;AACA,0BAAKG,IAAL,CAAU,GAAV,EAAe,UAAf;AACH;AACJ;AAvBe;AAwBnB;AAzBiC,C",
    "file": "../../../../src/controller/life/search/searchSuggestion.js",
    "sourcesContent": [
        "import Utils from '../../../utils/utils'\nconst BaseRest = require('../rest.js');\n\n/**\n * @api {get} /life/search/searchSuggestion 导航关键字搜索\n * @apiDescription 根据用户输入的关键字（wd）返回百度结果\n * @apiGroup searchGroup\n *\n * @apiParam {String} wd 用户输入的关键字\n * @apiUse baseUnLoginParams\n *\n * @apiParamExample {string} 请求参数格式:\n *  {\n *      \"wd\": \"a\",\n *      \"timestamp\": 1543578242441,\n *      \"accessToken\": 'e2b06cd',\n *      \"uid\": ''\n *  }\n *\n * @apiVersion 1.0.0\n * @apiSuccessExample {json} 正确返回值:\n *  {\n *      \"data\": [{\n *          \"value\": \"爱奇艺\"\n *      },{\n *          \"value\": \"adidas字体\"\n *      },{\n *          \"value\": \"阿里云\"\n *      },{\n *          \"value\": \"阿里巴巴\"\n *      },{\n *          \"value\": \"安居客\"\n *      },{\n *          \"value\": \"artifact\"\n *      }...],\n *      \"errno\": 0,\n *      \"errmsg\": \"获取搜索建议文本成功\"\n *  }\n *  @apiUse CODE_REFUSE_401\n *  @apiUse CODE_METHOD_GET_403\n *  @apiUse CODE_METHOD_POST_403\n */\n\nexport default class extends BaseRest {\n    async indexAction() {\n        if (this.isGet) {\n            const HttpRequest = think.service('httpRequest');\n            const param = this.get();\n            if (!param.wd) {\n                param.wd = '';\n            } else {\n                param.wd = encodeURI(param.wd);\n            }\n            let result = await HttpRequest.GetService('http://suggestion.baidu.com/su?ie=UTF-8&wd=' + param.wd);\n            let jsonStr = Utils.getBetweenTwoStringContent(result.body, '[', ']', true);\n            try {\n                let resultArr = JSON.parse(jsonStr.replace(/\\\\/g, ''));\n                for (let i = 0; i < resultArr.length; i++) {\n                    resultArr[i] = {\n                        value: resultArr[i]\n                    }\n                }\n                this.success(resultArr, '获取搜索建议文本成功');\n            } catch (err) {\n                console.log(err);\n                this.fail(500, '解析搜索结果失败');\n            }\n        }\n    }\n}"
    ]
}