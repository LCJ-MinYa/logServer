{
    "version": 3,
    "sources": [
        "../../../../src/controller/life/search/searchSuggestion.js"
    ],
    "names": [
        "BaseRest",
        "require",
        "indexAction",
        "HttpRequest",
        "think",
        "service",
        "param",
        "get",
        "wd",
        "encodeURI",
        "result",
        "GetService",
        "jsonStr",
        "getBetweenTwoStringContent",
        "body",
        "resultArr",
        "JSON",
        "parse",
        "replace",
        "i",
        "length",
        "value",
        "success",
        "err",
        "console",
        "log",
        "fail"
    ],
    "mappings": ";;AAAA;;;;;;;;AACA,MAAMA,WAAWC,QAAQ,YAAR,CAAjB;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBAwCe,cAAcD,QAAd,CAAuB;AAC5BE,eAAN,GAAoB;AAAA;;AAAA;AAChB,kBAAMC,cAAcC,MAAMC,OAAN,CAAc,aAAd,CAApB;AACA,kBAAMC,QAAQ,MAAKC,GAAL,EAAd;AACA,gBAAI,CAACD,MAAME,EAAX,EAAe;AACXF,sBAAME,EAAN,GAAW,EAAX;AACH,aAFD,MAEO;AACHF,sBAAME,EAAN,GAAWC,UAAUH,MAAME,EAAhB,CAAX;AACH;AACD,gBAAIE,SAAS,MAAMP,YAAYQ,UAAZ,CAAuB,gDAAgDL,MAAME,EAA7E,CAAnB;AACA,gBAAII,UAAU,gBAAMC,0BAAN,CAAiCH,OAAOI,IAAxC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,IAAxD,CAAd;AACA,gBAAI;AACA,oBAAIC,YAAYC,KAAKC,KAAL,CAAWL,QAAQM,OAAR,CAAgB,KAAhB,EAAuB,EAAvB,CAAX,CAAhB;AACA,qBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIJ,UAAUK,MAA9B,EAAsCD,GAAtC,EAA2C;AACvCJ,8BAAUI,CAAV,IAAe;AACXE,+BAAON,UAAUI,CAAV;AADI,qBAAf;AAGH;AACD,sBAAKG,OAAL,CAAaP,SAAb,EAAwB,YAAxB;AACA,uBAAO,KAAP;AACH,aATD,CASE,OAAOQ,GAAP,EAAY;AACVC,wBAAQC,GAAR,CAAYF,GAAZ;AACA,sBAAKG,IAAL,CAAU,GAAV,EAAe,UAAf;AACA,uBAAO,KAAP;AACH;AAvBe;AAwBnB;AAzBiC,C",
    "file": "../../../../src/controller/life/search/searchSuggestion.js",
    "sourcesContent": [
        "import Utils from '../../../utils/utils'\nconst BaseRest = require('../rest.js');\n\n/**\n * @api {get} /life/search/searchSuggestion 导航关键字搜索\n * @apiDescription 根据用户输入的关键字（wd）返回百度结果\n * @apiGroup searchGroup\n *\n * @apiParam {String} wd 用户输入的关键字\n * @apiUse baseUnLoginParams\n *\n * @apiParamExample {string} 请求参数格式:\n *  {\n *      \"wd\": \"a\",\n *      \"timestamp\": 1543578242441,\n *      \"accessToken\": 'e2b06cd',\n *      \"uid\": ''\n *  }\n *\n * @apiVersion 1.0.0\n * @apiSuccessExample {json} 正确返回值:\n *  {\n *      \"data\": [{\n *          \"value\": \"爱奇艺\"\n *      },{\n *          \"value\": \"adidas字体\"\n *      },{\n *          \"value\": \"阿里云\"\n *      },{\n *          \"value\": \"阿里巴巴\"\n *      },{\n *          \"value\": \"安居客\"\n *      },{\n *          \"value\": \"artifact\"\n *      }...],\n *      \"errno\": 0,\n *      \"errmsg\": \"获取搜索建议文本成功\"\n *  }\n *  @apiUse CODE_REFUSE_401\n *  @apiUse CODE_METHOD_GET_403\n *  @apiUse CODE_METHOD_POST_403\n */\n\nexport default class extends BaseRest {\n    async indexAction() {\n        const HttpRequest = think.service('httpRequest');\n        const param = this.get();\n        if (!param.wd) {\n            param.wd = '';\n        } else {\n            param.wd = encodeURI(param.wd);\n        }\n        let result = await HttpRequest.GetService('http://suggestion.baidu.com/su?ie=UTF-8&wd=' + param.wd);\n        let jsonStr = Utils.getBetweenTwoStringContent(result.body, '[', ']', true);\n        try {\n            let resultArr = JSON.parse(jsonStr.replace(/\\\\/g, ''));\n            for (let i = 0; i < resultArr.length; i++) {\n                resultArr[i] = {\n                    value: resultArr[i]\n                }\n            }\n            this.success(resultArr, '获取搜索建议文本成功');\n            return false;\n        } catch (err) {\n            console.log(err);\n            this.fail(500, '解析搜索结果失败');\n            return false;\n        }\n    }\n}"
    ]
}