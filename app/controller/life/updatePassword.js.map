{
    "version": 3,
    "sources": [
        "../../../src/controller/life/updatePassword.js"
    ],
    "names": [
        "BaseRest",
        "require",
        "UpdataPassword",
        "indexAction",
        "isPost",
        "PasswordList",
        "think",
        "mongo",
        "param",
        "post",
        "accessToken",
        "result",
        "where",
        "_id",
        "select",
        "length",
        "shouldUpdate",
        "i",
        "affectedRows",
        "update",
        "success",
        "fail"
    ],
    "mappings": ";;;;AAAA,MAAMA,WAAWC,QAAQ,WAAR,CAAjB;;AAEe,MAAMC,cAAN,SAA6BF,QAA7B,CAAsC;AAC3CG,eAAN,GAAoB;AAAA;;AAAA;AAChB,gBAAI,MAAKC,MAAT,EAAiB;AACb,sBAAMC,eAAeC,MAAMC,KAAN,CAAY,cAAZ,EAA4B,eAA5B,CAArB;AACA,oBAAIC,QAAQ,MAAKC,IAAL,EAAZ;AACA,uBAAOD,MAAME,WAAb;AACA,oBAAIC,SAAS,MAAMN,aAAaO,KAAb,CAAmB;AAClCC,yBAAKL,MAAMK;AADuB,iBAAnB,EAEhBC,MAFgB,EAAnB;AAGA,oBAAIH,OAAOI,MAAP,KAAkB,CAAtB,EAAyB;AACrB,wBAAIC,eAAe,KAAnB;AACA,yBAAK,IAAIC,CAAT,IAAcT,KAAd,EAAqB;AACjB,4BAAIS,KAAK,WAAL,IAAoBA,KAAK,KAAzB,IAAkCA,KAAK,KAA3C,EAAkD;AAC9C;AACH;AACD,4BAAIT,MAAMS,CAAN,MAAaN,OAAO,CAAP,EAAUM,CAAV,CAAjB,EAA+B;AAC3BD,2CAAe,IAAf;AACH;AACJ;AACD,wBAAIA,YAAJ,EAAkB;AACd,4BAAIE,eAAe,MAAMb,aAAaO,KAAb,CAAmB;AACxCC,iCAAKL,MAAMK;AAD6B,yBAAnB,EAEtBM,MAFsB,CAEfX,KAFe,CAAzB;AAGA,4BAAIU,YAAJ,EAAkB;AACd,kCAAKE,OAAL,CAAa,EAAb,EAAiB,YAAjB;AACH,yBAFD,MAEO;AACH,kCAAKC,IAAL,CAAU,GAAV,EAAe,YAAf;AACH;AACJ,qBATD,MASO;AACH,8BAAKA,IAAL,CAAU,GAAV,EAAe,cAAf;AACH;AACJ,iBAtBD,MAsBO;AACH,0BAAKA,IAAL,CAAU,GAAV,EAAe,WAAf;AACH;AACJ;AAjCe;AAkCnB;AAnCgD;kBAAhCnB,c",
    "file": "../../../src/controller/life/updatePassword.js",
    "sourcesContent": [
        "const BaseRest = require('./rest.js');\n\nexport default class UpdataPassword extends BaseRest {\n    async indexAction() {\n        if (this.isPost) {\n            const PasswordList = think.mongo('PasswordList', 'mongoPassword');\n            let param = this.post();\n            delete param.accessToken;\n            let result = await PasswordList.where({\n                _id: param._id\n            }).select();\n            if (result.length !== 0) {\n                let shouldUpdate = false;\n                for (let i in param) {\n                    if (i == 'timestamp' || i == '_id' || i == 'uid') {\n                        continue;\n                    }\n                    if (param[i] !== result[0][i]) {\n                        shouldUpdate = true;\n                    }\n                }\n                if (shouldUpdate) {\n                    let affectedRows = await PasswordList.where({\n                        _id: param._id\n                    }).update(param);\n                    if (affectedRows) {\n                        this.success({}, '修改密码数据信息成功');\n                    } else {\n                        this.fail(401, '修改密码数据信息失败');\n                    }\n                } else {\n                    this.fail(401, '密码信息相同,不需要修改');\n                }\n            } else {\n                this.fail(401, '未匹配到该密码信息');\n            }\n        }\n    }\n}"
    ]
}