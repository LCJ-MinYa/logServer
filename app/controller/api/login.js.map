{
    "version": 3,
    "sources": [
        "../../../src/controller/api/login.js"
    ],
    "names": [
        "BaseRest",
        "require",
        "Login",
        "indexAction",
        "isPost",
        "param",
        "post",
        "User",
        "think",
        "mongo",
        "result",
        "where",
        "email",
        "select",
        "length",
        "password",
        "success",
        "uid",
        "userName",
        "fail"
    ],
    "mappings": ";;;;AAAA,MAAMA,WAAWC,QAAQ,WAAR,CAAjB;;AAEe,MAAMC,KAAN,SAAoBF,QAApB,CAA6B;AACrCG,YAAN,GAAoB;AAAA;;AAAA;AACnB,OAAI,MAAKC,MAAT,EAAiB;AAChB,UAAMC,QAAQ,MAAKC,IAAL,EAAd;AACA,UAAMC,OAAOC,MAAMC,KAAN,CAAY,MAAZ,CAAb;AACA,UAAMC,SAAS,MAAMH,KAAKI,KAAL,CAAW;AAC/BC,YAAOP,MAAMO;AADkB,KAAX,EAElBC,MAFkB,EAArB;AAGA,QAAIH,OAAOI,MAAP,KAAkB,CAAtB,EAAyB;AACxB,SAAIJ,OAAO,CAAP,EAAUK,QAAV,IAAsBV,MAAMU,QAAhC,EAA0C;AACzC,YAAKC,OAAL,CAAa;AACZC,YAAKP,OAAO,CAAP,EAAUO,GADH;AAEZC,iBAAUR,OAAO,CAAP,EAAUQ;AAFR,OAAb,EAGG,MAHH;AAIA,MALD,MAKO;AACN,YAAKC,IAAL,CAAU,GAAV,EAAe,MAAf;AACA;AACD,KATD,MASO;AACN,WAAKA,IAAL,CAAU,GAAV,EAAe,OAAf;AACA;AACD;AAnBkB;AAoBnB;AArB0C;kBAAvBjB,K",
    "file": "../../../src/controller/api/login.js",
    "sourcesContent": [
        "const BaseRest = require('./rest.js');\n\nexport default class Login extends BaseRest {\n\tasync indexAction() {\n\t\tif (this.isPost) {\n\t\t\tconst param = this.post();\n\t\t\tconst User = think.mongo('User');\n\t\t\tconst result = await User.where({\n\t\t\t\temail: param.email\n\t\t\t}).select();\n\t\t\tif (result.length !== 0) {\n\t\t\t\tif (result[0].password == param.password) {\n\t\t\t\t\tthis.success({\n\t\t\t\t\t\tuid: result[0].uid,\n\t\t\t\t\t\tuserName: result[0].userName\n\t\t\t\t\t}, '登录成功');\n\t\t\t\t} else {\n\t\t\t\t\tthis.fail(401, '密码错误');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.fail(401, '用户不存在');\n\t\t\t}\n\t\t}\n\t}\n}"
    ]
}